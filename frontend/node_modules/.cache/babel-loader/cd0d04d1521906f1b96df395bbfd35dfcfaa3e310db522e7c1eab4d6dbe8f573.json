{"ast":null,"code":"import { GraphQLClient } from 'graphql-request';\n\n/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\n/* global Reflect, Promise, SuppressedError, Symbol */\n\nfunction __awaiter(thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n}\ntypeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\n  var e = new Error(message);\n  return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\n};\nvar ContentType;\n(function (ContentType) {\n  ContentType[\"Music\"] = \"MUSIC\";\n  ContentType[\"Shorts\"] = \"SHORTS\";\n  ContentType[\"Video\"] = \"VIDEO\";\n})(ContentType || (ContentType = {}));\nvar IdentifierType;\n(function (IdentifierType) {\n  IdentifierType[\"Asin\"] = \"ASIN\";\n  IdentifierType[\"Igdb\"] = \"IGDB\";\n  IdentifierType[\"Imdb\"] = \"IMDB\";\n  IdentifierType[\"Moby\"] = \"MOBY\";\n  IdentifierType[\"Playstation\"] = \"PLAYSTATION\";\n  IdentifierType[\"Rawg\"] = \"RAWG\";\n  IdentifierType[\"Tvdb\"] = \"TVDB\";\n  IdentifierType[\"Tvmaze\"] = \"TVMAZE\";\n  IdentifierType[\"Youtube\"] = \"YOUTUBE\";\n})(IdentifierType || (IdentifierType = {}));\nvar Source;\n(function (Source) {\n  Source[\"Amazon\"] = \"AMAZON\";\n  Source[\"Netflix\"] = \"NETFLIX\";\n  Source[\"Playstation\"] = \"PLAYSTATION\";\n  Source[\"Youtube\"] = \"YOUTUBE\";\n})(Source || (Source = {}));\n/** An enum describing what kind of type a given `__Type` is. */\nvar __TypeKind;\n(function (__TypeKind) {\n  /** Indicates this type is a scalar. */\n  __TypeKind[\"Scalar\"] = \"SCALAR\";\n  /** Indicates this type is an object. `fields` and `interfaces` are valid fields. */\n  __TypeKind[\"Object\"] = \"OBJECT\";\n  /** Indicates this type is an interface. `fields`, `interfaces`, and `possibleTypes` are valid fields. */\n  __TypeKind[\"Interface\"] = \"INTERFACE\";\n  /** Indicates this type is a union. `possibleTypes` is a valid field. */\n  __TypeKind[\"Union\"] = \"UNION\";\n  /** Indicates this type is an enum. `enumValues` is a valid field. */\n  __TypeKind[\"Enum\"] = \"ENUM\";\n  /** Indicates this type is an input object. `inputFields` is a valid field. */\n  __TypeKind[\"InputObject\"] = \"INPUT_OBJECT\";\n  /** Indicates this type is a list. `ofType` is a valid field. */\n  __TypeKind[\"List\"] = \"LIST\";\n  /** Indicates this type is a non-null. `ofType` is a valid field. */\n  __TypeKind[\"NonNull\"] = \"NON_NULL\";\n})(__TypeKind || (__TypeKind = {}));\nconst GetAppByPublicKeyDocument = {\n  \"kind\": \"Document\",\n  \"definitions\": [{\n    \"kind\": \"OperationDefinition\",\n    \"operation\": \"query\",\n    \"name\": {\n      \"kind\": \"Name\",\n      \"value\": \"GetAppByPublicKey\"\n    },\n    \"variableDefinitions\": [{\n      \"kind\": \"VariableDefinition\",\n      \"variable\": {\n        \"kind\": \"Variable\",\n        \"name\": {\n          \"kind\": \"Name\",\n          \"value\": \"publicKey\"\n        }\n      },\n      \"type\": {\n        \"kind\": \"NonNullType\",\n        \"type\": {\n          \"kind\": \"NamedType\",\n          \"name\": {\n            \"kind\": \"Name\",\n            \"value\": \"String\"\n          }\n        }\n      }\n    }],\n    \"selectionSet\": {\n      \"kind\": \"SelectionSet\",\n      \"selections\": [{\n        \"kind\": \"Field\",\n        \"name\": {\n          \"kind\": \"Name\",\n          \"value\": \"getAppByPublicKey\"\n        },\n        \"arguments\": [{\n          \"kind\": \"Argument\",\n          \"name\": {\n            \"kind\": \"Name\",\n            \"value\": \"publicKey\"\n          },\n          \"value\": {\n            \"kind\": \"Variable\",\n            \"name\": {\n              \"kind\": \"Name\",\n              \"value\": \"publicKey\"\n            }\n          }\n        }],\n        \"selectionSet\": {\n          \"kind\": \"SelectionSet\",\n          \"selections\": [{\n            \"kind\": \"Field\",\n            \"name\": {\n              \"kind\": \"Name\",\n              \"value\": \"appName\"\n            }\n          }, {\n            \"kind\": \"Field\",\n            \"name\": {\n              \"kind\": \"Name\",\n              \"value\": \"gandalfID\"\n            }\n          }]\n        }\n      }]\n    }\n  }]\n};\nconst GetSupportedServicesDocument = {\n  \"kind\": \"Document\",\n  \"definitions\": [{\n    \"kind\": \"OperationDefinition\",\n    \"operation\": \"query\",\n    \"name\": {\n      \"kind\": \"Name\",\n      \"value\": \"GetSupportedServices\"\n    },\n    \"selectionSet\": {\n      \"kind\": \"SelectionSet\",\n      \"selections\": [{\n        \"kind\": \"Field\",\n        \"name\": {\n          \"kind\": \"Name\",\n          \"value\": \"__type\"\n        },\n        \"arguments\": [{\n          \"kind\": \"Argument\",\n          \"name\": {\n            \"kind\": \"Name\",\n            \"value\": \"name\"\n          },\n          \"value\": {\n            \"kind\": \"StringValue\",\n            \"value\": \"Source\",\n            \"block\": false\n          }\n        }],\n        \"selectionSet\": {\n          \"kind\": \"SelectionSet\",\n          \"selections\": [{\n            \"kind\": \"Field\",\n            \"name\": {\n              \"kind\": \"Name\",\n              \"value\": \"name\"\n            }\n          }, {\n            \"kind\": \"Field\",\n            \"name\": {\n              \"kind\": \"Name\",\n              \"value\": \"enumValues\"\n            },\n            \"arguments\": [{\n              \"kind\": \"Argument\",\n              \"name\": {\n                \"kind\": \"Name\",\n                \"value\": \"includeDeprecated\"\n              },\n              \"value\": {\n                \"kind\": \"BooleanValue\",\n                \"value\": false\n              }\n            }],\n            \"selectionSet\": {\n              \"kind\": \"SelectionSet\",\n              \"selections\": [{\n                \"kind\": \"Field\",\n                \"name\": {\n                  \"kind\": \"Name\",\n                  \"value\": \"name\"\n                }\n              }]\n            }\n          }]\n        }\n      }]\n    }\n  }]\n};\n\n/* eslint-disable */\n/**\n * Map of all GraphQL operations in the project.\n *\n * This map has several performance disadvantages:\n * 1. It is not tree-shakeable, so it will include all operations in the project.\n * 2. It is not minifiable, so the string of a GraphQL query will be multiple times inside the bundle.\n * 3. It does not support dead code elimination, so it will add unused operations.\n *\n * Therefore it is highly recommended to use the babel or swc plugin for production.\n */\nconst documents = {\n  \"\\n  query GetAppByPublicKey($publicKey: String!) {\\n    getAppByPublicKey(publicKey: $publicKey) {\\n        appName\\n        gandalfID\\n    }\\n  }\\n\": GetAppByPublicKeyDocument,\n  \"\\n  query GetSupportedServices {\\n    __type(name: \\\"Source\\\") {\\n      name\\n      enumValues(includeDeprecated: false) {\\n        name\\n      }\\n    }\\n  }\\n\": GetSupportedServicesDocument\n};\nfunction gql(source) {\n  var _a;\n  return (_a = documents[source]) !== null && _a !== void 0 ? _a : {};\n}\nconst GET_APP_BY_PUBLIC_KEY = gql(`\n  query GetAppByPublicKey($publicKey: String!) {\n    getAppByPublicKey(publicKey: $publicKey) {\n        appName\n        gandalfID\n    }\n  }\n`);\nconst GET_SUPORTED_SERVICES = gql(`\n  query GetSupportedServices {\n    __type(name: \"Source\") {\n      name\n      enumValues(includeDeprecated: false) {\n        name\n      }\n    }\n  }\n`);\nconst WATSON_URL = \"https://sauron.gandalf.network/public/gql\";\nconst APP_CLIP_BASE_URL = \"https://appclip.apple.com/id?p=network.gandalf.connect.Clip\";\nconst verifyPublicKey = variables => __awaiter(void 0, void 0, void 0, function* () {\n  try {\n    const client = new GraphQLClient(WATSON_URL);\n    const data = yield client.request(GET_APP_BY_PUBLIC_KEY, variables);\n    return data.getAppByPublicKey.gandalfID > 0;\n  } catch (error) {\n    return false;\n  }\n});\nconst base64EncodedIcon = 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIj4KICAgIDxnIGNsaXAtcGF0aD0idXJsKCNjbGlwMF8xMzNfMjgzOTYpIj4KICAgICAgICA8cGF0aCBkPSJNMjQgMTJDMjQgMTguNjI3NCAxOC42Mjc0IDI0IDEyIDI0QzUuMzcyNTggMjQgMCAxOC42Mjc0IDAgMTJDMCA1LjM3MjU4IDUuMzcyNTggMCAxMiAwQzE4LjYyNzQgMCAyNCA1LjM3MjU4IDI0IDEyWiIgZmlsbD0iIzY2MTBGMiI+PC9wYXRoPgogICAgICAgIDxwYXRoIGQ9Ik05LjIxODIzIDI5LjM4OTRMOC44OTYyMSAzMy43NDc0TDkuNDM2MzMgMzMuODIxNUwxMC4yOTg1IDI5LjUzNzVMOS4yMTgyMyAyOS4zODk0WiIgZmlsbD0id2hpdGUiPjwvcGF0aD4KICAgICAgICA8cGF0aCBkPSJNOS4yNTUzNiAyOS4xMTkzTDEwLjI4MDUgMTkuNjMwMUwxMS45MDA5IDE5Ljg1MjFMMTAuMzM1NiAyOS4yNjczTDkuMjU1MzYgMjkuMTE5M1oiIGZpbGw9IndoaXRlIj48L3BhdGg+CiAgICAgICAgPHBhdGggZD0iTTExLjkzNzggMTkuNTgyMUwxMC4zMTc0IDE5LjM2MDFMMTAuNDgwNCAxNC4xNTQ5TDE0LjY2ODMgMTEuNzAyM0wxMy41NzcxIDkuNjI2NzlMMTAuOTk4NSAxMC4zNzRMMTAuOTI0NSAxMC45MTQxTDExLjQ2NDYgMTAuOTg4MUwxMS45MzA3IDExLjYwMjNMMTAuODk4NSAxMy4xMTE2TDkuMDgyMDUgMTIuMzEyNUw5LjI5MzA3IDguNzY0NjNMMTQuMTgwMiA3LjIzMzIyTDE2LjgyODggMTEuOTk4M0wxMi40OTI5IDE1LjUzMTJMMTEuOTM3OCAxOS41ODIxWiIgZmlsbD0id2hpdGUiPjwvcGF0aD4KICAgICAgICA8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEyIDIyLjY5MzNDMTcuOTA1NyAyMi42OTMzIDIyLjY5MzMgMTcuOTA1NyAyMi42OTMzIDEyQzIyLjY5MzMgNi4wOTQyNSAxNy45MDU3IDEuMzA2NyAxMiAxLjMwNjdDNi4wOTQyNSAxLjMwNjcgMS4zMDY3IDYuMDk0MjUgMS4zMDY3IDEyQzEuMzA2NyAxNy45MDU3IDYuMDk0MjUgMjIuNjkzMyAxMiAyMi42OTMzWk0xMiAyNEMxOC42Mjc0IDI0IDI0IDE4LjYyNzQgMjQgMTJDMjQgNS4zNzI1OCAxOC42Mjc0IDAgMTIgMEM1LjM3MjU4IDAgMCA1LjM3MjU4IDAgMTJDMCAxOC42Mjc0IDUuMzcyNTggMjQgMTIgMjRaIiBmaWxsPSJ3aGl0ZSI+PC9wYXRoPgogICAgPC9nPgogICAgPGRlZnM+CiAgICAgICAgPGNsaXBQYXRoIGlkPSJjbGlwMF8xMzNfMjgzOTYiPgogICAgICAgICAgICA8cmVjdCB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHJ4PSIxMCIgZmlsbD0id2hpdGUiPjwvcmVjdD4KICAgICAgICA8L2NsaXBQYXRoPgogICAgPC9kZWZzPgo8L3N2Zz4K';\nconst qrCodeStyle = url => {\n  return {\n    width: 300,\n    height: 300,\n    data: url,\n    margin: 0,\n    qrOptions: {\n      typeNumber: 0,\n      mode: \"Byte\",\n      errorCorrectionLevel: \"Q\"\n    },\n    imageOptions: {\n      hideBackgroundDots: true,\n      imageSize: 0.5,\n      margin: 4\n    },\n    dotsOptions: {\n      type: \"classy\",\n      color: \"#6610f3\"\n    },\n    backgroundOptions: {\n      color: \"#ffffff\"\n    },\n    image: base64EncodedIcon,\n    cornersDotOptions: {\n      color: \"#6a0ff3\"\n    },\n    cornersSquareOptions: {\n      type: \"extra-rounded\",\n      color: \"#6610f3\"\n    }\n  };\n};\nconst getSupportedServices = () => __awaiter(void 0, void 0, void 0, function* () {\n  var _a;\n  let services = [];\n  try {\n    const client = new GraphQLClient(WATSON_URL);\n    const data = yield client.request(GET_SUPORTED_SERVICES);\n    if ((_a = data.__type) === null || _a === void 0 ? void 0 : _a.enumValues) {\n      for (let i of data.__type.enumValues) {\n        services = [...services, i.name.toLowerCase()];\n      }\n    }\n    return services;\n  } catch (error) {\n    return services;\n  }\n});\nvar GandalfErrorCode;\n(function (GandalfErrorCode) {\n  GandalfErrorCode[\"InvalidPublicKey\"] = \"INVALID_PUBLIC_KEY\";\n  GandalfErrorCode[\"InvalidRedirectURL\"] = \"INVALID_REDIRECT_URL\";\n  GandalfErrorCode[\"InvalidService\"] = \"INVALID_SERVICE\";\n  GandalfErrorCode[\"DataKeyNotFound\"] = \"DATA_KEY_NOT_FOUND\";\n  GandalfErrorCode[\"QRCodeNotGenerated\"] = \"QR_CODE_NOT_GENERATED\";\n  GandalfErrorCode[\"QRCodeGenNotSupported\"] = \"QR_CODE_GEN_NOT_SUPPORTED\";\n})(GandalfErrorCode || (GandalfErrorCode = {}));\nclass GandalfError extends Error {\n  constructor(message, code) {\n    super(message);\n    Object.setPrototypeOf(this, GandalfError.prototype);\n    this.name = \"GandalfError\";\n    this.code = code;\n  }\n}\nlet QRCodeStyling;\nif (typeof window !== 'undefined') {\n  import('qr-code-styling').then(module => {\n    QRCodeStyling = module.default;\n  });\n}\nclass Connect {\n  constructor(input) {\n    this.verificationComplete = false;\n    if (input.redirectURL.endsWith('/')) {\n      input.redirectURL = input.redirectURL.slice(0, -1);\n    }\n    this.publicKey = input.publicKey;\n    this.redirectURL = input.redirectURL;\n    this.services = input.services;\n  }\n  generateURL() {\n    return __awaiter(this, void 0, void 0, function* () {\n      yield this.allValidations(this.publicKey, this.redirectURL, this.services);\n      const services = JSON.stringify(this.services);\n      return encodeURI(`${APP_CLIP_BASE_URL}&services=${services}&redirectUrl=${this.redirectURL}&publicKey=${this.publicKey}`);\n    });\n  }\n  generateQRCode() {\n    return __awaiter(this, void 0, void 0, function* () {\n      if (typeof window == 'undefined') {\n        throw new GandalfError(\"QrCode generation only works in browsers\", GandalfErrorCode.QRCodeGenNotSupported);\n      }\n      yield this.allValidations(this.publicKey, this.redirectURL, this.services);\n      const services = JSON.stringify(this.services);\n      const url = encodeURI(`${APP_CLIP_BASE_URL}&services=${services}&redirectUrl=${this.redirectURL}&publicKey=${this.publicKey}`);\n      const qrCode = new QRCodeStyling(qrCodeStyle(url));\n      try {\n        const qrCodeBlob = yield qrCode.getRawData('webp');\n        if (!qrCodeBlob) {\n          throw new GandalfError(\"QRCode Generation Error\", GandalfErrorCode.QRCodeNotGenerated);\n        }\n        const qrCodeURL = URL.createObjectURL(qrCodeBlob);\n        return qrCodeURL;\n      } catch (error) {\n        throw new GandalfError(error.message, GandalfErrorCode.QRCodeNotGenerated);\n      }\n    });\n  }\n  static getSupportedServices() {\n    return __awaiter(this, void 0, void 0, function* () {\n      const services = yield getSupportedServices();\n      return services;\n    });\n  }\n  static getDataKeyFromURL(redirectURL) {\n    Connect.validateRedirectURL(redirectURL);\n    const url = new URL(redirectURL);\n    const dataKey = url.searchParams.get('dataKey');\n    if (!dataKey) {\n      throw new GandalfError(`Datakey not found in the URL ${redirectURL}`, GandalfErrorCode.DataKeyNotFound);\n    }\n    return dataKey;\n  }\n  allValidations(publicKey, redirectURL, services) {\n    return __awaiter(this, void 0, void 0, function* () {\n      if (!this.verificationComplete) {\n        yield Connect.validatePublicKey(publicKey);\n        yield Connect.validateInputServices(services);\n        Connect.validateRedirectURL(redirectURL);\n      }\n      this.verificationComplete = true;\n    });\n  }\n  static validatePublicKey(publicKey) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const isValidPublicKey = yield verifyPublicKey({\n        publicKey\n      });\n      if (!isValidPublicKey) {\n        throw new GandalfError('Public key does not exist', GandalfErrorCode.InvalidPublicKey);\n      }\n    });\n  }\n  static validateInputServices(input) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const services = yield getSupportedServices();\n      let unsupportedServices = [];\n      let requiredServices = 0;\n      for (const key in input) {\n        if (!services.includes(key.toLowerCase())) {\n          unsupportedServices = [...unsupportedServices, key];\n          continue;\n        }\n        if (input[key]) requiredServices++;\n      }\n      if (unsupportedServices.length > 0) {\n        throw new GandalfError(`These services ${unsupportedServices.join(' ')} are unsupported`, GandalfErrorCode.InvalidService);\n      }\n      if (requiredServices < 1) {\n        throw new GandalfError(\"At least one service has to be required\", GandalfErrorCode.InvalidService);\n      }\n    });\n  }\n  static validateRedirectURL(url) {\n    try {\n      Boolean(new URL(url));\n    } catch (e) {\n      throw new GandalfError('Invalid redirectURL', GandalfErrorCode.InvalidRedirectURL);\n    }\n  }\n}\nexport { Connect as default };","map":{"version":3,"names":["GraphQLClient","__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","apply","SuppressedError","error","suppressed","message","Error","name","ContentType","IdentifierType","Source","__TypeKind","GetAppByPublicKeyDocument","GetSupportedServicesDocument","documents","gql","source","_a","GET_APP_BY_PUBLIC_KEY","GET_SUPORTED_SERVICES","WATSON_URL","APP_CLIP_BASE_URL","verifyPublicKey","variables","client","data","request","getAppByPublicKey","gandalfID","base64EncodedIcon","qrCodeStyle","url","width","height","margin","qrOptions","typeNumber","mode","errorCorrectionLevel","imageOptions","hideBackgroundDots","imageSize","dotsOptions","type","color","backgroundOptions","image","cornersDotOptions","cornersSquareOptions","getSupportedServices","services","__type","enumValues","i","toLowerCase","GandalfErrorCode","GandalfError","constructor","code","Object","setPrototypeOf","prototype","QRCodeStyling","window","module","default","Connect","input","verificationComplete","redirectURL","endsWith","slice","publicKey","generateURL","allValidations","JSON","stringify","encodeURI","generateQRCode","QRCodeGenNotSupported","qrCode","qrCodeBlob","getRawData","QRCodeNotGenerated","qrCodeURL","URL","createObjectURL","getDataKeyFromURL","validateRedirectURL","dataKey","searchParams","get","DataKeyNotFound","validatePublicKey","validateInputServices","isValidPublicKey","InvalidPublicKey","unsupportedServices","requiredServices","key","includes","length","join","InvalidService","Boolean","InvalidRedirectURL"],"sources":["/Users/ayodejiakinola/Documents/gandalf-gate/gandalf-data-aggregator/frontend/node_modules/@gandalf-network/connect/dist/index.mjs"],"sourcesContent":["import { GraphQLClient } from 'graphql-request';\n\n/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise, SuppressedError, Symbol */\r\n\r\n\r\nfunction __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\ntypeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\r\n    var e = new Error(message);\r\n    return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\r\n};\n\nvar ContentType;\n(function (ContentType) {\n  ContentType[\"Music\"] = \"MUSIC\";\n  ContentType[\"Shorts\"] = \"SHORTS\";\n  ContentType[\"Video\"] = \"VIDEO\";\n})(ContentType || (ContentType = {}));\nvar IdentifierType;\n(function (IdentifierType) {\n  IdentifierType[\"Asin\"] = \"ASIN\";\n  IdentifierType[\"Igdb\"] = \"IGDB\";\n  IdentifierType[\"Imdb\"] = \"IMDB\";\n  IdentifierType[\"Moby\"] = \"MOBY\";\n  IdentifierType[\"Playstation\"] = \"PLAYSTATION\";\n  IdentifierType[\"Rawg\"] = \"RAWG\";\n  IdentifierType[\"Tvdb\"] = \"TVDB\";\n  IdentifierType[\"Tvmaze\"] = \"TVMAZE\";\n  IdentifierType[\"Youtube\"] = \"YOUTUBE\";\n})(IdentifierType || (IdentifierType = {}));\nvar Source;\n(function (Source) {\n  Source[\"Amazon\"] = \"AMAZON\";\n  Source[\"Netflix\"] = \"NETFLIX\";\n  Source[\"Playstation\"] = \"PLAYSTATION\";\n  Source[\"Youtube\"] = \"YOUTUBE\";\n})(Source || (Source = {}));\n/** An enum describing what kind of type a given `__Type` is. */\nvar __TypeKind;\n(function (__TypeKind) {\n  /** Indicates this type is a scalar. */\n  __TypeKind[\"Scalar\"] = \"SCALAR\";\n  /** Indicates this type is an object. `fields` and `interfaces` are valid fields. */\n  __TypeKind[\"Object\"] = \"OBJECT\";\n  /** Indicates this type is an interface. `fields`, `interfaces`, and `possibleTypes` are valid fields. */\n  __TypeKind[\"Interface\"] = \"INTERFACE\";\n  /** Indicates this type is a union. `possibleTypes` is a valid field. */\n  __TypeKind[\"Union\"] = \"UNION\";\n  /** Indicates this type is an enum. `enumValues` is a valid field. */\n  __TypeKind[\"Enum\"] = \"ENUM\";\n  /** Indicates this type is an input object. `inputFields` is a valid field. */\n  __TypeKind[\"InputObject\"] = \"INPUT_OBJECT\";\n  /** Indicates this type is a list. `ofType` is a valid field. */\n  __TypeKind[\"List\"] = \"LIST\";\n  /** Indicates this type is a non-null. `ofType` is a valid field. */\n  __TypeKind[\"NonNull\"] = \"NON_NULL\";\n})(__TypeKind || (__TypeKind = {}));\nconst GetAppByPublicKeyDocument = {\n  \"kind\": \"Document\",\n  \"definitions\": [{\n    \"kind\": \"OperationDefinition\",\n    \"operation\": \"query\",\n    \"name\": {\n      \"kind\": \"Name\",\n      \"value\": \"GetAppByPublicKey\"\n    },\n    \"variableDefinitions\": [{\n      \"kind\": \"VariableDefinition\",\n      \"variable\": {\n        \"kind\": \"Variable\",\n        \"name\": {\n          \"kind\": \"Name\",\n          \"value\": \"publicKey\"\n        }\n      },\n      \"type\": {\n        \"kind\": \"NonNullType\",\n        \"type\": {\n          \"kind\": \"NamedType\",\n          \"name\": {\n            \"kind\": \"Name\",\n            \"value\": \"String\"\n          }\n        }\n      }\n    }],\n    \"selectionSet\": {\n      \"kind\": \"SelectionSet\",\n      \"selections\": [{\n        \"kind\": \"Field\",\n        \"name\": {\n          \"kind\": \"Name\",\n          \"value\": \"getAppByPublicKey\"\n        },\n        \"arguments\": [{\n          \"kind\": \"Argument\",\n          \"name\": {\n            \"kind\": \"Name\",\n            \"value\": \"publicKey\"\n          },\n          \"value\": {\n            \"kind\": \"Variable\",\n            \"name\": {\n              \"kind\": \"Name\",\n              \"value\": \"publicKey\"\n            }\n          }\n        }],\n        \"selectionSet\": {\n          \"kind\": \"SelectionSet\",\n          \"selections\": [{\n            \"kind\": \"Field\",\n            \"name\": {\n              \"kind\": \"Name\",\n              \"value\": \"appName\"\n            }\n          }, {\n            \"kind\": \"Field\",\n            \"name\": {\n              \"kind\": \"Name\",\n              \"value\": \"gandalfID\"\n            }\n          }]\n        }\n      }]\n    }\n  }]\n};\nconst GetSupportedServicesDocument = {\n  \"kind\": \"Document\",\n  \"definitions\": [{\n    \"kind\": \"OperationDefinition\",\n    \"operation\": \"query\",\n    \"name\": {\n      \"kind\": \"Name\",\n      \"value\": \"GetSupportedServices\"\n    },\n    \"selectionSet\": {\n      \"kind\": \"SelectionSet\",\n      \"selections\": [{\n        \"kind\": \"Field\",\n        \"name\": {\n          \"kind\": \"Name\",\n          \"value\": \"__type\"\n        },\n        \"arguments\": [{\n          \"kind\": \"Argument\",\n          \"name\": {\n            \"kind\": \"Name\",\n            \"value\": \"name\"\n          },\n          \"value\": {\n            \"kind\": \"StringValue\",\n            \"value\": \"Source\",\n            \"block\": false\n          }\n        }],\n        \"selectionSet\": {\n          \"kind\": \"SelectionSet\",\n          \"selections\": [{\n            \"kind\": \"Field\",\n            \"name\": {\n              \"kind\": \"Name\",\n              \"value\": \"name\"\n            }\n          }, {\n            \"kind\": \"Field\",\n            \"name\": {\n              \"kind\": \"Name\",\n              \"value\": \"enumValues\"\n            },\n            \"arguments\": [{\n              \"kind\": \"Argument\",\n              \"name\": {\n                \"kind\": \"Name\",\n                \"value\": \"includeDeprecated\"\n              },\n              \"value\": {\n                \"kind\": \"BooleanValue\",\n                \"value\": false\n              }\n            }],\n            \"selectionSet\": {\n              \"kind\": \"SelectionSet\",\n              \"selections\": [{\n                \"kind\": \"Field\",\n                \"name\": {\n                  \"kind\": \"Name\",\n                  \"value\": \"name\"\n                }\n              }]\n            }\n          }]\n        }\n      }]\n    }\n  }]\n};\n\n/* eslint-disable */\n/**\n * Map of all GraphQL operations in the project.\n *\n * This map has several performance disadvantages:\n * 1. It is not tree-shakeable, so it will include all operations in the project.\n * 2. It is not minifiable, so the string of a GraphQL query will be multiple times inside the bundle.\n * 3. It does not support dead code elimination, so it will add unused operations.\n *\n * Therefore it is highly recommended to use the babel or swc plugin for production.\n */\nconst documents = {\n  \"\\n  query GetAppByPublicKey($publicKey: String!) {\\n    getAppByPublicKey(publicKey: $publicKey) {\\n        appName\\n        gandalfID\\n    }\\n  }\\n\": GetAppByPublicKeyDocument,\n  \"\\n  query GetSupportedServices {\\n    __type(name: \\\"Source\\\") {\\n      name\\n      enumValues(includeDeprecated: false) {\\n        name\\n      }\\n    }\\n  }\\n\": GetSupportedServicesDocument\n};\nfunction gql(source) {\n  var _a;\n  return (_a = documents[source]) !== null && _a !== void 0 ? _a : {};\n}\n\nconst GET_APP_BY_PUBLIC_KEY = gql(`\n  query GetAppByPublicKey($publicKey: String!) {\n    getAppByPublicKey(publicKey: $publicKey) {\n        appName\n        gandalfID\n    }\n  }\n`);\nconst GET_SUPORTED_SERVICES = gql(`\n  query GetSupportedServices {\n    __type(name: \"Source\") {\n      name\n      enumValues(includeDeprecated: false) {\n        name\n      }\n    }\n  }\n`);\n\nconst WATSON_URL = \"https://sauron.gandalf.network/public/gql\";\nconst APP_CLIP_BASE_URL = \"https://appclip.apple.com/id?p=network.gandalf.connect.Clip\";\n\nconst verifyPublicKey = variables => __awaiter(void 0, void 0, void 0, function* () {\n  try {\n    const client = new GraphQLClient(WATSON_URL);\n    const data = yield client.request(GET_APP_BY_PUBLIC_KEY, variables);\n    return data.getAppByPublicKey.gandalfID > 0;\n  } catch (error) {\n    return false;\n  }\n});\n\nconst base64EncodedIcon = 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIj4KICAgIDxnIGNsaXAtcGF0aD0idXJsKCNjbGlwMF8xMzNfMjgzOTYpIj4KICAgICAgICA8cGF0aCBkPSJNMjQgMTJDMjQgMTguNjI3NCAxOC42Mjc0IDI0IDEyIDI0QzUuMzcyNTggMjQgMCAxOC42Mjc0IDAgMTJDMCA1LjM3MjU4IDUuMzcyNTggMCAxMiAwQzE4LjYyNzQgMCAyNCA1LjM3MjU4IDI0IDEyWiIgZmlsbD0iIzY2MTBGMiI+PC9wYXRoPgogICAgICAgIDxwYXRoIGQ9Ik05LjIxODIzIDI5LjM4OTRMOC44OTYyMSAzMy43NDc0TDkuNDM2MzMgMzMuODIxNUwxMC4yOTg1IDI5LjUzNzVMOS4yMTgyMyAyOS4zODk0WiIgZmlsbD0id2hpdGUiPjwvcGF0aD4KICAgICAgICA8cGF0aCBkPSJNOS4yNTUzNiAyOS4xMTkzTDEwLjI4MDUgMTkuNjMwMUwxMS45MDA5IDE5Ljg1MjFMMTAuMzM1NiAyOS4yNjczTDkuMjU1MzYgMjkuMTE5M1oiIGZpbGw9IndoaXRlIj48L3BhdGg+CiAgICAgICAgPHBhdGggZD0iTTExLjkzNzggMTkuNTgyMUwxMC4zMTc0IDE5LjM2MDFMMTAuNDgwNCAxNC4xNTQ5TDE0LjY2ODMgMTEuNzAyM0wxMy41NzcxIDkuNjI2NzlMMTAuOTk4NSAxMC4zNzRMMTAuOTI0NSAxMC45MTQxTDExLjQ2NDYgMTAuOTg4MUwxMS45MzA3IDExLjYwMjNMMTAuODk4NSAxMy4xMTE2TDkuMDgyMDUgMTIuMzEyNUw5LjI5MzA3IDguNzY0NjNMMTQuMTgwMiA3LjIzMzIyTDE2LjgyODggMTEuOTk4M0wxMi40OTI5IDE1LjUzMTJMMTEuOTM3OCAxOS41ODIxWiIgZmlsbD0id2hpdGUiPjwvcGF0aD4KICAgICAgICA8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEyIDIyLjY5MzNDMTcuOTA1NyAyMi42OTMzIDIyLjY5MzMgMTcuOTA1NyAyMi42OTMzIDEyQzIyLjY5MzMgNi4wOTQyNSAxNy45MDU3IDEuMzA2NyAxMiAxLjMwNjdDNi4wOTQyNSAxLjMwNjcgMS4zMDY3IDYuMDk0MjUgMS4zMDY3IDEyQzEuMzA2NyAxNy45MDU3IDYuMDk0MjUgMjIuNjkzMyAxMiAyMi42OTMzWk0xMiAyNEMxOC42Mjc0IDI0IDI0IDE4LjYyNzQgMjQgMTJDMjQgNS4zNzI1OCAxOC42Mjc0IDAgMTIgMEM1LjM3MjU4IDAgMCA1LjM3MjU4IDAgMTJDMCAxOC42Mjc0IDUuMzcyNTggMjQgMTIgMjRaIiBmaWxsPSJ3aGl0ZSI+PC9wYXRoPgogICAgPC9nPgogICAgPGRlZnM+CiAgICAgICAgPGNsaXBQYXRoIGlkPSJjbGlwMF8xMzNfMjgzOTYiPgogICAgICAgICAgICA8cmVjdCB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHJ4PSIxMCIgZmlsbD0id2hpdGUiPjwvcmVjdD4KICAgICAgICA8L2NsaXBQYXRoPgogICAgPC9kZWZzPgo8L3N2Zz4K';\nconst qrCodeStyle = url => {\n  return {\n    width: 300,\n    height: 300,\n    data: url,\n    margin: 0,\n    qrOptions: {\n      typeNumber: 0,\n      mode: \"Byte\",\n      errorCorrectionLevel: \"Q\"\n    },\n    imageOptions: {\n      hideBackgroundDots: true,\n      imageSize: 0.5,\n      margin: 4\n    },\n    dotsOptions: {\n      type: \"classy\",\n      color: \"#6610f3\"\n    },\n    backgroundOptions: {\n      color: \"#ffffff\"\n    },\n    image: base64EncodedIcon,\n    cornersDotOptions: {\n      color: \"#6a0ff3\"\n    },\n    cornersSquareOptions: {\n      type: \"extra-rounded\",\n      color: \"#6610f3\"\n    }\n  };\n};\n\nconst getSupportedServices = () => __awaiter(void 0, void 0, void 0, function* () {\n  var _a;\n  let services = [];\n  try {\n    const client = new GraphQLClient(WATSON_URL);\n    const data = yield client.request(GET_SUPORTED_SERVICES);\n    if ((_a = data.__type) === null || _a === void 0 ? void 0 : _a.enumValues) {\n      for (let i of data.__type.enumValues) {\n        services = [...services, i.name.toLowerCase()];\n      }\n    }\n    return services;\n  } catch (error) {\n    return services;\n  }\n});\n\nvar GandalfErrorCode;\n(function (GandalfErrorCode) {\n  GandalfErrorCode[\"InvalidPublicKey\"] = \"INVALID_PUBLIC_KEY\";\n  GandalfErrorCode[\"InvalidRedirectURL\"] = \"INVALID_REDIRECT_URL\";\n  GandalfErrorCode[\"InvalidService\"] = \"INVALID_SERVICE\";\n  GandalfErrorCode[\"DataKeyNotFound\"] = \"DATA_KEY_NOT_FOUND\";\n  GandalfErrorCode[\"QRCodeNotGenerated\"] = \"QR_CODE_NOT_GENERATED\";\n  GandalfErrorCode[\"QRCodeGenNotSupported\"] = \"QR_CODE_GEN_NOT_SUPPORTED\";\n})(GandalfErrorCode || (GandalfErrorCode = {}));\nclass GandalfError extends Error {\n  constructor(message, code) {\n    super(message);\n    Object.setPrototypeOf(this, GandalfError.prototype);\n    this.name = \"GandalfError\";\n    this.code = code;\n  }\n}\n\nlet QRCodeStyling;\nif (typeof window !== 'undefined') {\n  import('qr-code-styling').then(module => {\n    QRCodeStyling = module.default;\n  });\n}\nclass Connect {\n  constructor(input) {\n    this.verificationComplete = false;\n    if (input.redirectURL.endsWith('/')) {\n      input.redirectURL = input.redirectURL.slice(0, -1);\n    }\n    this.publicKey = input.publicKey;\n    this.redirectURL = input.redirectURL;\n    this.services = input.services;\n  }\n  generateURL() {\n    return __awaiter(this, void 0, void 0, function* () {\n      yield this.allValidations(this.publicKey, this.redirectURL, this.services);\n      const services = JSON.stringify(this.services);\n      return encodeURI(`${APP_CLIP_BASE_URL}&services=${services}&redirectUrl=${this.redirectURL}&publicKey=${this.publicKey}`);\n    });\n  }\n  generateQRCode() {\n    return __awaiter(this, void 0, void 0, function* () {\n      if (typeof window == 'undefined') {\n        throw new GandalfError(\"QrCode generation only works in browsers\", GandalfErrorCode.QRCodeGenNotSupported);\n      }\n      yield this.allValidations(this.publicKey, this.redirectURL, this.services);\n      const services = JSON.stringify(this.services);\n      const url = encodeURI(`${APP_CLIP_BASE_URL}&services=${services}&redirectUrl=${this.redirectURL}&publicKey=${this.publicKey}`);\n      const qrCode = new QRCodeStyling(qrCodeStyle(url));\n      try {\n        const qrCodeBlob = yield qrCode.getRawData('webp');\n        if (!qrCodeBlob) {\n          throw new GandalfError(\"QRCode Generation Error\", GandalfErrorCode.QRCodeNotGenerated);\n        }\n        const qrCodeURL = URL.createObjectURL(qrCodeBlob);\n        return qrCodeURL;\n      } catch (error) {\n        throw new GandalfError(error.message, GandalfErrorCode.QRCodeNotGenerated);\n      }\n    });\n  }\n  static getSupportedServices() {\n    return __awaiter(this, void 0, void 0, function* () {\n      const services = yield getSupportedServices();\n      return services;\n    });\n  }\n  static getDataKeyFromURL(redirectURL) {\n    Connect.validateRedirectURL(redirectURL);\n    const url = new URL(redirectURL);\n    const dataKey = url.searchParams.get('dataKey');\n    if (!dataKey) {\n      throw new GandalfError(`Datakey not found in the URL ${redirectURL}`, GandalfErrorCode.DataKeyNotFound);\n    }\n    return dataKey;\n  }\n  allValidations(publicKey, redirectURL, services) {\n    return __awaiter(this, void 0, void 0, function* () {\n      if (!this.verificationComplete) {\n        yield Connect.validatePublicKey(publicKey);\n        yield Connect.validateInputServices(services);\n        Connect.validateRedirectURL(redirectURL);\n      }\n      this.verificationComplete = true;\n    });\n  }\n  static validatePublicKey(publicKey) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const isValidPublicKey = yield verifyPublicKey({\n        publicKey\n      });\n      if (!isValidPublicKey) {\n        throw new GandalfError('Public key does not exist', GandalfErrorCode.InvalidPublicKey);\n      }\n    });\n  }\n  static validateInputServices(input) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const services = yield getSupportedServices();\n      let unsupportedServices = [];\n      let requiredServices = 0;\n      for (const key in input) {\n        if (!services.includes(key.toLowerCase())) {\n          unsupportedServices = [...unsupportedServices, key];\n          continue;\n        }\n        if (input[key]) requiredServices++;\n      }\n      if (unsupportedServices.length > 0) {\n        throw new GandalfError(`These services ${unsupportedServices.join(' ')} are unsupported`, GandalfErrorCode.InvalidService);\n      }\n      if (requiredServices < 1) {\n        throw new GandalfError(\"At least one service has to be required\", GandalfErrorCode.InvalidService);\n      }\n    });\n  }\n  static validateRedirectURL(url) {\n    try {\n      Boolean(new URL(url));\n    } catch (e) {\n      throw new GandalfError('Invalid redirectURL', GandalfErrorCode.InvalidRedirectURL);\n    }\n  }\n}\n\nexport { Connect as default };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}